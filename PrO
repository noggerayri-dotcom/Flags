-- LocalScript under StarterPlayerScripts
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local hrp = character:WaitForChild("HumanoidRootPart")

-- Idle animation ID
local idleAnimationId = "rbxassetid://507766666"

-- Load idle animation
local animator = humanoid:FindFirstChildOfClass("Animator")
if not animator then
    animator = Instance.new("Animator")
    animator.Parent = humanoid
end

local idleAnimation = Instance.new("Animation")
idleAnimation.AnimationId = idleAnimationId
local idleTrack = animator:LoadAnimation(idleAnimation)
idleTrack.Priority = Enum.AnimationPriority.Action
idleTrack:Play()

-- Keep idle visually even while moving or attacking
RunService.RenderStepped:Connect(function()
    -- Reapply the idle track if it stops
    if not idleTrack.IsPlaying then
        idleTrack:Play()
    end
    
    -- Stop all movement animations to prevent them from overriding idle
    for _, track in pairs(animator:GetPlayingAnimationTracks()) do
        if track.Priority == Enum.AnimationPriority.Movement then
            track:Stop()
        end
    end
end)
